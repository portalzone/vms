# ----------------------------------------------------------------------
# STAGE 1: BUILD (For compiling Vue/Vite assets)
# ----------------------------------------------------------------------
FROM node:20-alpine AS frontend_builder

# Set working directory
WORKDIR /app

# Copy package files from the correct path
COPY vms-frontend/vue-project/package*.json ./

# Install dependencies
RUN npm install

# Copy the entire Vue project source
COPY vms-frontend/vue-project/ ./

# Debug: Show what files we have
RUN ls -la && cat package.json

# Run the build
RUN npm run build
