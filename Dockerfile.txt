# ----------------------------------------------------------------------
# STAGE 1: BUILD (For compiling Vue/Vite assets)
# ----------------------------------------------------------------------
FROM node:20-alpine AS frontend_builder

# Set the working directory to a simpler path
WORKDIR /app

# Copy package files first (for better layer caching)
COPY vms-frontend/vue-project/package*.json ./

# Install dependencies
RUN npm install

# Copy the rest of the Vue project
COPY vms-frontend/vue-project/ ./

# Run the build
RUN npm run build
